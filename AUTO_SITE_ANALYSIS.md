# 🤖 자동 사이트 분석 가이드

**핵심**: URL만 입력하면 자동으로 분석합니다!

---

## ✨ 자동 분석 시스템

### SiteAnalyzerService가 하는 일

1. **페이지 접속** → HTML 다운로드
2. **구조 분석** → 테이블, 리스트, 카드 등 자동 감지
3. **선택자 추천** → 최적의 CSS 선택자 생성
4. **샘플 데이터** → 실제 추출되는 데이터 미리보기

### 사용자가 하는 일

1. URL 입력 ← **이것만!**
2. 분석 결과 확인
3. 이름 입력 후 저장

---

## 📋 실전 예시

### 예시 1: 서초문화재단

**URL**: https://www.seochocf.or.kr/web/culture/event

#### 자동 분석 프로세스
```
1. 관리자 페이지에서 URL 입력
2. "🔍 분석" 클릭
3. 자동으로 추천:
   {
     "method": "static" 또는 "dynamic",
     "listSelector": ".event-list .item",
     "titleSelector": ".title",
     "dateSelector": ".date"
   }
4. 샘플 데이터 미리보기:
   - 서리풀 클래식 콘서트
   - 문화교실 수강생 모집
   - 전시회 안내
5. 이름 입력: "서초문화재단 행사"
6. 저장 → 완료!
```

### 예시 2: 서초구립도서관

**URL**: https://seocholib.or.kr/programs

#### 자동 분석
```
1. URL 입력
2. 분석 → 자동 추천:
   {
     "listSelector": ".program-list li",
     "titleSelector": ".program-title",
     "dateSelector": ".program-date"
   }
3. 저장 → 완료!
```

---

## 🎯 수동 분석이 필요한 경우

### 거의 없습니다! 하지만...

#### 자동 분석이 정확하지 않은 경우:
1. 아주 복잡한 구조
2. JavaScript로 동적 로딩
3. 비표준 HTML 구조

#### 이럴 때만 수동 조정:
- 개발자 도구 열기 (F12)
- HTML 구조 확인
- 선택자 수정

**하지만**: 관리자 페이지에서 바로 수정 가능!

---

## 💡 권장 워크플로우

### 단계별 가이드

#### 1단계: 빠른 테스트 (추천)
```
1. URL 입력
2. 자동 분석
3. 바로 저장
4. 테스트 크롤링
   → 잘 작동하면 OK!
   → 안 되면 2단계로
```

#### 2단계: 미세 조정 (필요시)
```
1. 테스트 결과 확인
2. 문제 발견 (제목이 안 나오거나, 날짜가 이상하거나)
3. Config 수정:
   - titleSelector 조정
   - dateSelector 조정
4. 다시 테스트
```

#### 3단계: 고급 설정 (선택)
```
1. 상세 페이지 크롤링 추가
2. 페이지네이션 설정
3. 특수 필터 적용
```

---

## 🚀 실전 데모

### 지금 바로 테스트해보기

#### 준비물:
- ✅ 백엔드 실행 중
- ✅ 프론트엔드 실행 중
- ✅ 관리자 페이지 접속

#### 테스트할 URL:
1. **서초구 평생학습관**
   - URL: https://www.seochopeople.or.kr
   - 예상: 교육 프로그램 목록

2. **서초여성가족플라자**
   - URL: http://www.seochowomen.kr
   - 예상: 여성/가족 프로그램

3. **양재천 체육공원**
   - URL: (서초구청 내 체육시설 페이지)
   - 예상: 체육 프로그램 및 시설 안내

#### 진행 방법:
```
각 URL마다:
1. 관리자 페이지에서 "➕ 웹사이트 분석 및 추가" 클릭
2. URL 붙여넣기
3. "🔍 분석" 클릭
4. 결과 확인
5. 이름 입력 (예: "서초 평생학습관")
6. "✅ 저장"
7. "🧪 테스트" 버튼으로 크롤링 테스트
```

---

## 📊 분석 성공률

### 자동 분석 예상 성공률

| 사이트 타입 | 성공률 | 비고 |
|------------|--------|------|
| 전통적인 게시판 | ~90% | 서초구청처럼 |
| WordPress 기반 | ~80% | 표준 테마 사용 시 |
| 일반 기업 사이트 | ~70% | 다양한 구조 |
| SPA (React/Vue) | ~50% | 수동 조정 필요 |
| 복잡한 구조 | ~30% | 개발자 도움 필요 |

### 대부분의 공공기관 사이트: ~85% 성공률 ✅

---

## 🔧 수동 조정이 필요한 실제 예시

### Case 1: JavaScript 동적 로딩

**문제**: 페이지가 로드되어도 내용이 안 보임

**해결**:
```json
{
  "method": "dynamic",  // static → dynamic 변경
  "waitForSelector": ".event-list"  // 기다릴 요소
}
```

### Case 2: 복잡한 HTML 구조

**문제**: 자동 추천 선택자가 정확하지 않음

**해결**:
```json
{
  "listSelector": "#main .content .events tbody tr",  // 더 구체적으로
  "titleSelector": "td:nth-child(2) > a:first-child"  // 정확한 위치
}
```

### Case 3: 날짜 형식이 특이한 경우

**문제**: 날짜 파싱 실패

**해결**: 
- 현재 `parseDate()` 메서드가 다양한 형식 지원
- 매우 특이한 경우만 코드 수정 필요

---

## 🎯 프로젝트 전략

### MVP (현재)

```
✅ 서울 열린데이터 API (자동)
✅ 서초구청 행사안내 (첫 페이지만)
⏳ 서초문화재단 (자동 분석으로 추가)
⏳ 서초도서관 (자동 분석으로 추가)
```

**목표**: 5-10개 데이터 소스

### 추가 방법

```
각 사이트마다 5분이면 충분:
1. URL 찾기 (1분)
2. 관리자 페이지에서 분석 (2분)
3. 저장 및 테스트 (2분)
```

**예상**: 1시간 안에 10개 사이트 등록 가능!

---

## 📝 체크리스트

### 새 사이트 추가 시

- [ ] 사이트 URL 확인
- [ ] 관리자 페이지 접속
- [ ] URL 입력 및 분석
- [ ] 샘플 데이터 확인
- [ ] 이름 입력 및 저장
- [ ] 테스트 크롤링
- [ ] 수집된 데이터 확인
- [ ] `isActive: true` 설정

### 문제 발생 시

- [ ] 백엔드 로그 확인
- [ ] 선택자 수정
- [ ] 타임아웃 조정
- [ ] method (static/dynamic) 변경
- [ ] 다시 테스트

---

## 🎊 정리

### ❌ 필요 없는 것:
- 일일이 HTML 분석
- CSS 선택자 수동 작성
- 복잡한 코딩

### ✅ 필요한 것:
- URL만 입력
- 자동 분석 결과 확인
- 간단한 이름 입력
- 저장 버튼 클릭

### 🚀 결과:
- **5분 만에** 새 사이트 추가
- **자동으로** 매일 크롤링
- **최신 정보** 자동 업데이트

---

**다음**: 관리자 페이지에서 실제로 사이트를 추가해보세요!

```
http://localhost:3001/admin/data-sources
```

**추천 첫 사이트**:
- 서초문화재단
- 서초도서관
- 서초여성가족플라자

각각 5분이면 충분합니다! 🎯
